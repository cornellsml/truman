extends ui_layout
  
block content

  
  
  .computer.only.tablet.only.four.wide.column 
    .ui.card
      //- this is the for user card - does not show up on mobile
      .image
        if user.profile.picture
          img(src='/user_post/'+user.profile.picture)
        else
          img(src=user.gravatar(60))
      .content
        a.header= user.profile.name || user.email || user.id

  .eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column
    if notification_feed == -1
      p You have no notifications. I guess no one likes you...jk! ðŸ˜œ
    else
      .ui.feed
        each val in notification_feed
          case val.action
            when 'read'
              - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.unhide.icon
                .content
                  img.ui.tiny.right.floated.image(src='/user_post/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |   has read your post. 
                      .date=val.time
                  else 
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have read your post.  
                      .date=val.time
              .ui.small.long.extrausers.modal(id=val.key)
                .image.centered.content
                  .ui.extra.centered.divided.items
                    each extra in val.actors
                      .item
                        a.ui.tiny.image(href='/user/'+extra.username)
                          img(src='/avatar-icon.svg', data-original=extra.profile.picture)
                        .middle.aligned.content
                          .header
                            a(href='/user/'+extra.username)=extra.profile.name
            when 'like'
             - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.like.icon
                .content
                  img.ui.tiny.right.floated.image(src='/user_post/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |   has liked your post. 
                      .date=val.time
                  else 
                    .summary 
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have liked your post. 
                      .date=val.time  
            when 'reply_read'
              - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.unhide.icon
                .content
                  img.ui.tiny.right.floated.image(src='/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      | has read your reply to #{val.originalActor.profile.name}'s post. 
                      .date=val.time
                  else 
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have read your reply to #{val.originalActor.profile.name}'s post.  
                      .date=val.time
              .ui.small.long.extrausers.modal(id=val.key)
                .image.centered.content
                  .ui.extra.centered.divided.items
                    each extra in val.actors
                      .item
                        a.ui.tiny.image(href='/user/'+extra.username)
                          img(src='/avatar-icon.svg', data-original=extra.profile.picture)
                        .middle.aligned.content
                          .header
                            a(href='/user/'+extra.username)=extra.profile.name
            when 'reply_like'
             - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.like.icon
                .content
                  img.ui.tiny.right.floated.image(src='/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |   has liked your reply to #{val.originalActor.profile.name}'s post. 
                      .date=val.time
                  else 
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have liked your reply to #{val.originalActor.profile.name}'s post. 
                      .date=val.time                                              
            when 'actor_reply_read'
              - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.unhide.icon
                .content
                  img.ui.tiny.right.floated.image(src='/user_post/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      | has read #{val.originalActor.profile.name}'s reply to your post. 
                      .date=val.time
                  else 
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have read #{val.originalActor.profile.name}'s reply to your post.
                      .date=val.time
              .ui.small.long.extrausers.modal(id=val.key)
                .image.centered.content
                  .ui.extra.centered.divided.items
                    each extra in val.actors
                      .item
                        a.ui.tiny.image(href='/user/'+extra.username)
                          img(src='/avatar-icon.svg', data-original=extra.profile.picture)
                        .middle.aligned.content
                          .header
                            a(href='/user/'+extra.username)=extra.profile.name
            when 'actor_reply_like'
             - var best = val.actors.splice(0, 5);
              .event
                .label
                  i.large.like.icon
                .content
                  img.ui.tiny.right.floated.image(src='/user_post/'+val.picture)
                  .extra.images
                    each actor in best
                      a.ui.avatar.image(href='/user/'+actor.username)
                        img(src='/profile_pictures/'+actor.profile.picture)
                  if best.length == 1
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |   has liked #{val.originalActor.profile.name}'s reply to your post. 
                      .date=val.time
                  else 
                    .summary
                      a(href='/user/'+best[0].username)=best[0].profile.name
                      |  and 
                      a.others(key=val.key)=(best.length+val.actors.length-1)+" others "
                      | have liked #{val.originalActor.profile.name}'s reply to your post. 
                      .date=val.time   
            when 'reply'
              event
                .label
                  i.large.reply.icon
                .content
                  .ui.fluid.card
                    .content
                      .right.floated.time.meta= (user.createdAt.getTime() + val.Originaltime)
                      |
                      a(href='/user/'+val.actor.username)
                        img.ui.avatar.image(src='/profile_pictures/'+val.actor.profile.picture)
                        span=val.actor.profile.name
                    .content
                      .description=val.replyBody
                    .extra.content
                      .ui.fluid.card
                        .content
                          .right.floated.time.meta= (user.createdAt.getTime() + val.time)
                          |
                          a.ui.avatar.image(href='/me')
                            if user.profile.picture
                              img(src='/user_post/'+user.profile.picture)
                            else
                              img(src=user.gravatar(60))
                          a(href='/me')
                            span=user.profile.name || user.email || user.id
                        if val.picture
                          .image
                            img(src='/user_post/'+val.picture)
                        .content
                          .description=val.body
                    .three.ui.bottom.attached.icon.buttons
                      .ui.animated.button(tabindex='0')
                        .visible.content
                          i.reply.icon
                        .hidden.content Reply to Post
                      .ui.vertical.animated.button(tabindex='1')
                        .visible.content
                          i.flag.icon
                        .hidden.content Report Post
                      .ui.animated.fade.button(tabindex='2')
                        .visible.content
                          i.like.icon
                        .hidden.content Like Post
            default
        
              